<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!1,fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="Key的相关命令Redis是key-value数据库。key使用字符串存储，但是key中不能出现空格或者换行符“\n”(仅限于key)。尽量使用较短的key1exists key 测试指定key是否存在，返回1表示存在，返回0表示不存在 1del key1 key2 ...keyN 删除指定key，返回删除key的数目，返回0表示给定key都不存在 1type key 返回给定key的value类"><meta name="keywords" content="Redis"><meta property="og:type" content="article"><meta property="og:title" content="Redis 常用操作"><meta property="og:url" content="https://www.mervyntang.com/93.html"><meta property="og:site_name" content="Mervyn&#39;s Blog"><meta property="og:description" content="Key的相关命令Redis是key-value数据库。key使用字符串存储，但是key中不能出现空格或者换行符“\n”(仅限于key)。尽量使用较短的key1exists key 测试指定key是否存在，返回1表示存在，返回0表示不存在 1del key1 key2 ...keyN 删除指定key，返回删除key的数目，返回0表示给定key都不存在 1type key 返回给定key的value类"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2017-06-27T07:51:00.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Redis 常用操作"><meta name="twitter:description" content="Key的相关命令Redis是key-value数据库。key使用字符串存储，但是key中不能出现空格或者换行符“\n”(仅限于key)。尽量使用较短的key1exists key 测试指定key是否存在，返回1表示存在，返回0表示不存在 1del key1 key2 ...keyN 删除指定key，返回删除key的数目，返回0表示给定key都不存在 1type key 返回给定key的value类"><link rel="canonical" href="https://www.mervyntang.com/93"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>Redis 常用操作 | Mervyn's Blog</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?05d754b9fcfd6144ad1210688d2c72d8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Mervyn's Blog</span><span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.mervyntang.com/93.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Mervyn"><meta itemprop="description" content="Coding Change Our Life"><meta itemprop="image" content="/images/avatar.jpeg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mervyn's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Redis 常用操作</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-06-27 15:51:00" itemprop="dateCreated datePublished" datetime="2017-06-27T15:51:00+08:00">2017-06-27</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/NoSQL/" itemprop="url" rel="index"><span itemprop="name">NoSQL</span></a></span></span><br></div></header><div class="post-body" itemprop="articleBody"><h2 id="Key的相关命令"><a href="#Key的相关命令" class="headerlink" title="Key的相关命令"></a>Key的相关命令</h2><p>Redis是key-value数据库。key使用字符串存储，但是key中不能出现空格或者换行符“\n”(仅限于key)。尽量使用较短的key<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exists key</span><br></pre></td></tr></table></figure><p></p><p>测试指定key是否存在，返回1表示存在，返回0表示不存在</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del key1 key2 ...keyN</span><br></pre></td></tr></table></figure><p>删除指定key，返回删除key的数目，返回0表示给定key都不存在</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> key</span><br></pre></td></tr></table></figure><p>返回给定key的value类型。返回none表示不存在key，String为字符类型，List为链表类型…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keys pattern</span><br></pre></td></tr></table></figure><p>返回匹配指定模式的所有key</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expire key seconds</span><br></pre></td></tr></table></figure><p>设置给定key的过期时间</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">randomkey</span><br></pre></td></tr></table></figure><p>返回从当前数据库中随机选择的一个key，如果当前数据库是空的，返回空串</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename oldkey newkey</span><br></pre></td></tr></table></figure><p>重命名key，如果newkey存在，将被覆盖，返回1表示成功，返回0表示失败。若失败，则可能是oldkey不存在或者newkey相同</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renamenx oldkey newkey</span><br></pre></td></tr></table></figure><p>同上，如果newkey存在返回失败<br>ttl key 返回设置过期时间key的剩余秒数， -1表示key不存在或者没有设置过期时间<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move key db-index</span><br></pre></td></tr></table></figure><p></p><p>将key从当前数据库移动到指定数据库。返回1成功，返回0表示key不存在或者已经在指定数据库中</p><h2 id="Redis数据类型"><a href="#Redis数据类型" class="headerlink" title="Redis数据类型"></a>Redis数据类型</h2><p>Redis支持的数据类型：String、List、Set、Sorted Set、Hash等。</p><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><h4 id="String类型支持的命令"><a href="#String类型支持的命令" class="headerlink" title="String类型支持的命令"></a>String类型支持的命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> key value</span><br></pre></td></tr></table></figure><p>设置key对应String类型的值，返回1表示成功，返回0表示失败</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setnx key value</span><br></pre></td></tr></table></figure><p>如果key不存在，设置key对应String类型的值。如果key已经存在，返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get key</span><br></pre></td></tr></table></figure><p>获取key对应的String值，如果key不存在返回nil</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getset key value</span><br></pre></td></tr></table></figure><p>先获取key的值，再设置key的值，如果key不存在返回nil</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mget key1 key2 ... keyN</span><br></pre></td></tr></table></figure><p>一次获取多个key的值，如果对应key不存在，则对应返回nil</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mset key1 value1 ... keyN valueN</span><br></pre></td></tr></table></figure><p>一次设置多个key的值，成功返回1，表示所有的值都设置；失败返回0，表示没有任何值被设置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msetnx key1 value1 ... keyN valueN</span><br></pre></td></tr></table></figure><p>一次设置多个key的值，但不会覆盖已经存在的key</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incr key</span><br></pre></td></tr></table></figure><p>向key对应的值加1，并返回新的值。注意incr一个不是int的value会返回错误<br>incr一个不存在的key，则设置key值为1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decr key</span><br></pre></td></tr></table></figure><p>向key对应的值做减1，decr一个不存在的key，则设置key值为-1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incrby key <span class="built_in">integer</span></span><br></pre></td></tr></table></figure><p>向key对应的值加上一个指定整数integer，key不存在时会设置key，并认为原来的value是0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decrby key <span class="built_in">integer</span></span><br></pre></td></tr></table></figure><p>向key对应的值减去一个指定整数integer。decrby完全是为了可读性，通过incrby一个负值实现同样效果，反之一样 可以用String类型缓存一些静态文件，如图片文件、CSS文件等。同时String支持incr操作，可以用作统计计算，如统计网站访问次数、博客访问次数等。</p><p>例：<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; <span class="built_in">set</span> s1 v1        //设置s1的值为 v1，类似MySQL的replace操作</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; get s1           //获取s1的值</span><br><span class="line"><span class="string">"v1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; setnx s1 vv1     //设置s1的值为vv1，s1如果存在不更新</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; get s1</span><br><span class="line"><span class="string">"v1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; <span class="built_in">set</span> s1 vvv1</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; get s1</span><br><span class="line"><span class="string">"vvv1"</span></span><br><span class="line">//获取key（s1）的值，并重新设置s1的值为v1。返回重新设置前的key的值，如果key不存在则返回(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; getset s1 v1</span><br><span class="line"><span class="string">"vvv1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; get s1</span><br><span class="line"><span class="string">"v1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; getset s6 s6</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; get s6</span><br><span class="line"><span class="string">"s6"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; <span class="built_in">set</span> s2 v2</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; <span class="built_in">set</span> s3 v3</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; mget s1 s7 s2 s3    //获取s1、s2、s3的值,如果某个key不存在则返回(nil)</span><br><span class="line">1) <span class="string">"v1"</span></span><br><span class="line">2) (nil)</span><br><span class="line">3) <span class="string">"v2"</span></span><br><span class="line">3) <span class="string">"v3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; mset s1 vv1 s4 v4   //同时设置s1、s4的值,设置值类似replace操作</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; mget s1 s2 s3</span><br><span class="line">1) <span class="string">"vv1"</span>  //设置之前是 <span class="string">"v1"</span></span><br><span class="line">2) <span class="string">"v2"</span></span><br><span class="line">3) <span class="string">"v3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; incr s1            //key对应的value的类型必须为<span class="built_in">integer</span>，否则报错</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">redis 127.0.0.1:6379&gt; incr s5</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; get s5</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; incr s5            //对s5加1，返回新的s5的值</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; get s5</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; decr s1            //key对应的value的类型必须为<span class="built_in">integer</span>，否则报错</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">redis 127.0.0.1:6379&gt; decr s5            //对s5减1，返回新的s5的值</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; get s5</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; incrby s5 2        //对s5加2，返回新的s5的值</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; get s5</span><br><span class="line"><span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; incrby s1 2</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">redis 127.0.0.1:6379&gt; decrby s5 -2       //对s5减-2，返回新的s5的值</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">redis 127.0.0.1:6379&gt; get s5</span><br><span class="line"><span class="string">"5"</span></span><br></pre></td></tr></table></figure><p></p><h3 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h3><p><code>List数据类型指key对应的是一个双向链表结构</code></p><h4 id="List类型支持的命令"><a href="#List类型支持的命令" class="headerlink" title="List类型支持的命令"></a>List类型支持的命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpush key string</span><br></pre></td></tr></table></figure><p>向key对应List头部添加一个字符串元素，成功返回1，失败返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpush key string</span><br></pre></td></tr></table></figure><p>向key对应List尾部添加一个字符串元素，成功返回1，失败返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">llen key</span><br></pre></td></tr></table></figure><p>返回key对应List的长度，如果key不存在返回0，如果key对应类型不是List返回错误<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrange key start end</span><br></pre></td></tr></table></figure><p></p><p>返回指定区间内（start~end）的元素，下标从0开始，负值表示从链表尾部开始计算，-1表示倒数第一个元素，<br>key不存在返回空列表<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ltrim key start end</span><br></pre></td></tr></table></figure><p></p><p>截取List指定区间（start~end）元素，成功返回1，key或者下标不存在返回错误<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lset key index value</span><br></pre></td></tr></table></figure><p></p><p>设置List中指定下标的元素值，成功返回1，key或者下标不存在返回错误<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrem key count value</span><br></pre></td></tr></table></figure><p></p><p>从List头部（count正数）或尾部（count负数）删除一定数量（count绝对值）的匹配value的元素，返回删除的元素数量。<br>count为0时删除全部<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpop key</span><br></pre></td></tr></table></figure><p></p><p>从List头部删除并返回删除元素。如果key对应List不存在或者是空返回nil，如果key对应值不是List返回错误<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpop key</span><br></pre></td></tr></table></figure><p></p><p>从List尾部删除并返回删除元素<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blpop key1...keyN timeout</span><br></pre></td></tr></table></figure><p></p><p>从左到右扫描key1…keyN，对第一个非空List进行lpop操作并返回。如果所有List都是空或不存在，阻塞timeout秒，<br>timeout为0表示一直阻塞。阻塞时，如果有其他client对key1…keyN中任意一个key进行push操作，阻塞解除并返回。<br>如果超时发生，则返回nil<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brpop key1...keyN timeout</span><br></pre></td></tr></table></figure><p></p><p>功能与blpop相似，不同的是blpop从头部删除，而brpop从尾部删除<br>可以用List类型存放微博中的”我关注的列表“，或者论坛中所有回帖ID。使用List还可以实现消息队列功能，减轻数据库的压力。<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush list1 1     //从list1头部插入一个元素，value为1,返回list1的长度</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush list1 2     //从list1头部插入一个元素，value为2,返回list1的长度，此时list1为： [2] [1]</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; llen list1        //返回list1的长度</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1  //返回list1 从头到尾所有的元素</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 3      //从list1尾部插入一个元素，value为3, 返回list1的长度,此时list1为： [2] [1] [3]</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 1 6   //列出list1的元素，从下标为1开始，到下标为6结束</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 4      //从list1尾部插入一个元素，value为4</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 5      //从list1尾部插入一个元素，value为5</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 6      //从list1尾部插入一个元素，value为6，此时list1为： [2] [1] [3] [4] [5] [6]</span><br><span class="line">(<span class="built_in">integer</span>) 6</span><br><span class="line">redis 127.0.0.1:6379&gt; ltrim list1 0 1   //截取list1的元素，只保留下标0~1的元素,此时list1为： [2] [1]</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 3</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 4</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">redis 127.0.0.1:6379&gt; rpush list1 5     //此时list1为： [2] [1] [3] [4] [5]</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">redis 127.0.0.1:6379&gt; lset list1 0 22   //设置List1中下标为0的值为22，此时list1为：[22] [1] [3] [4] [5]</span><br><span class="line">redis 127.0.0.1:6379&gt; lset ss 0 1       //设置ss中下标为0的值为1,因为key(22)不存在，报错</span><br><span class="line">(error) ERR no such key</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lset list1 5 6    //设置ss中下标为0的值为1,因为key(list1)的下标 5 不存在，报错</span><br><span class="line">(error) ERR index out of range</span><br></pre></td></tr></table></figure><p></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">例2：</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1  //从头到尾列出list1的所有元素</span><br><span class="line"> 1) <span class="string">"22"</span></span><br><span class="line"> 2) <span class="string">"1"</span></span><br><span class="line"> 3) <span class="string">"3"</span></span><br><span class="line"> 4) <span class="string">"4"</span></span><br><span class="line"> 5) <span class="string">"55"</span></span><br><span class="line"> 6) <span class="string">"3"</span></span><br><span class="line"> 7) <span class="string">"3"</span></span><br><span class="line"> 8) <span class="string">"3"</span></span><br><span class="line"> 9) <span class="string">"22"</span></span><br><span class="line">10) <span class="string">"3"</span></span><br><span class="line">11) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrem list1 0 1     //删除list1中所有值为1的元素，此时list1为：[22] [3] [4] [55] [3] [3] [3] [22] [22] [3] [4]</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lrem list1 -1 3   //从尾部开始删除list1中的1个值为3的元素，返回删除元素的数量</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">4) <span class="string">"55"</span></span><br><span class="line">5) <span class="string">"3"</span></span><br><span class="line">6) <span class="string">"3"</span></span><br><span class="line">7) <span class="string">"3"</span></span><br><span class="line">8) <span class="string">"22"</span></span><br><span class="line">9) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrem list1 1 3    //从头部开始删除list1中的1个值为3的元素，返回删除元素的数量</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"4"</span></span><br><span class="line">3) <span class="string">"55"</span></span><br><span class="line">4) <span class="string">"3"</span></span><br><span class="line">5) <span class="string">"3"</span></span><br><span class="line">6) <span class="string">"3"</span></span><br><span class="line">7) <span class="string">"22"</span></span><br><span class="line">8) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lpop list1    //从list1头部删除一个元素，并返回该元素的value值，此时list1为：[4] [55] [3] [3] [3] [22] [4]</span><br><span class="line"><span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; rpop list1    //从list1尾部删除一个元素，并返回该元素的值</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; rpop list1    //从list1尾部删除一个元素，并返回该元素的值，此时list1为：[4] [55] [3] [3] [3]</span><br><span class="line"><span class="string">"22"</span></span><br><span class="line"></span><br><span class="line">client1 &gt;&gt; redis 127.0.0.1:6379&gt; blpop list f1 f2 0  //从左到右扫描f1、f2，返回对第一个非空List进行lpop操作并返回。因为f1、f2都不存在,所以一直阻塞。</span><br><span class="line">client2 &gt;&gt; redis 127.0.0.1:6379&gt; lpush f1 1          //此时有一个客户端push进了一个元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">client1 &gt;&gt; redis 127.0.0.1:6379&gt; blpop list f1 f2 0  //该阻塞的进程结束阻塞，并进行lpop操作</span><br><span class="line">1) <span class="string">"l1"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">(40.47s)</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">2) <span class="string">"55"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"3"</span></span><br><span class="line">5) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lpush list2 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush list2 2</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush list2 3         //此时list2为： [3] [2] [1]</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; blpop list1 list2 0  //从左到右扫描list1、list2，对第一个非空List进行lpop操作并返回。即删除并返回list1的第一个元素</span><br><span class="line">1) <span class="string">"list1"</span></span><br><span class="line">2) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"55"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; brpop list1 list2 0  //从左到右依次扫描list1、list2,对第一个非空List进行rpop操作。即删除并返回list1的最后一个元素</span><br><span class="line">1) <span class="string">"list1"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"55"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) <span class="string">"3"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"55"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; ltrim list1 3 6   //截取并保留list1的下标（3~6）的部分值</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br><span class="line"></span><br><span class="line">例3：</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line"> 1) <span class="string">"22"</span></span><br><span class="line"> 2) <span class="string">"3"</span></span><br><span class="line"> 3) <span class="string">"4"</span></span><br><span class="line"> 4) <span class="string">"5"</span></span><br><span class="line"> 5) <span class="string">"3"</span></span><br><span class="line"> 6) <span class="string">"3"</span></span><br><span class="line"> 7) <span class="string">"3"</span></span><br><span class="line"> 8) <span class="string">"22"</span></span><br><span class="line"> 9) <span class="string">"3"</span></span><br><span class="line">10) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; lrem list1 -2 3   //从尾部开始删除list1中的2个值为3的元素，返回删除元素的数量</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">4) <span class="string">"5"</span></span><br><span class="line">5) <span class="string">"3"</span></span><br><span class="line">6) <span class="string">"3"</span></span><br><span class="line">7) <span class="string">"22"</span></span><br><span class="line">8) <span class="string">"4"</span></span><br></pre></td></tr></table></figure><h3 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h3><p><code>Set数据类型的优点是快速查找元素是否存在，用于记录一些不能重复的数据。例如，在网站注册账号时用户名不能重复，使用Set记录注册用户，如果注册的用户名已经存在于Set中，则拒绝此用户登录。</code></p><p>####Set类型支持的命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sadd key number</span><br></pre></td></tr></table></figure><p>添加一个String元素到key对应的set集合中，成功返回1，如果元素在集合中返回0，<br>key对应的Set不存在返回错误</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srem key number</span><br></pre></td></tr></table></figure><p>从key对应set中移除给定元素，成功返回1，如果member在集合中不存在或者key不存在返回0，<br>如果key对应的不是set类型的值返回错误<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spop key</span><br></pre></td></tr></table></figure><p></p><p>删除并返回key对应set中随机的一个元素，如果set是空或者key对应的set不存在返回nil</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srandmember key</span><br></pre></td></tr></table></figure><p>同spop，随机取set中的一个元素，但是不删除元素</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smove srckey dstkey member</span><br></pre></td></tr></table></figure><p>从srckey对应set中移除member并添加到dstkey对应set中，整个操作是原子的。成功返回1，如果member在<br>srckey总不存在返回0，如果key对应的值不是set类型，返回错误</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scard key</span><br></pre></td></tr></table></figure><p>返回set的元素个数，如果set是空或者key不存在返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sismember key member</span><br></pre></td></tr></table></figure><p>判断member是否在set中，存在返回1，不存在或者key对应的set集合不存在返回0<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sinter key1 key2...keyN</span><br></pre></td></tr></table></figure><p></p><p>返回所有给定key的交集</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sinterstore dstkey key1 key2...keyN</span><br></pre></td></tr></table></figure><p>同sinter，同时将交集存到dstkey对应set集合中</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sunion key1 key2...keyN</span><br></pre></td></tr></table></figure><p>返回所有给定key的并集</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sunionstore dstkey key1 key2 ...keyN</span><br></pre></td></tr></table></figure><p>同sunion，同时把并集保存到dstkey对应的set集合中</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdiff key1 key2...keyN</span><br></pre></td></tr></table></figure><p>返回所有给定key的差集</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdiffstore dstkey key1 key2...keyN</span><br></pre></td></tr></table></figure><p>同sdiff，同时把差集保存到dstkey对应的set集合中</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smembers key</span><br></pre></td></tr></table></figure><p>返回key对应set的所有元素，结果是无序的</p><p>Set类型通常用于记录做过某些事情。例如在某些投票系统中，每个用户一天只能投票一次那么可以使用Set来记录某个用户的投票情况，只需要以日期作为Set的key，则将用户ID作为number即可。要查看某一个用户今天是否投过票，只需以今天的日期作为key去查询此用户ID是否存在。<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 1     //向集合set1中添加一个元素，值为1。类似MySQL的Insert操作</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 2</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 1     //向集合set1中添加一个元素，值为1。因为1已经在集合set1中，所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 3</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 4</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set1   //返回set1集合中的所有元素</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; srandmember set1  //随机返回set1集合中的一个元素</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; srandmember set1</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; srem set1 ss   //移除set1集合中的元素ss，因为该元素不存在所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; srem set3 ss   //移除set1集合中的元素ss，因为该key（set3）不存在所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; srem set1 3    //移除set1集合中的元素3，返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; spop set1      //删除并返回set1对应集合中随机的一个元素，如果<span class="built_in">set</span>是空或者key对应的<span class="built_in">set</span>不存在返回nil</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; spop set1</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; spop set1</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; spop set1</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; spop set4</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 4</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set1</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set2</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; smove set1 set2 1   //从set1移除值为1的元素并添加到set2中，返回1。</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; smove set3 set2 1   //从set1移除值为1的元素并添加到set2中，因为set3不存在所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; smove set1 set2 1   //从set1移除值为1的元素并添加到set2中，因为set1中不存在值为1的元素，所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set2</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; scard set2           //返回set2集合的元素个数</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; scard set3           //返回set2集合的元素个数，set3不存在，所以返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sismember set1 2     //判断值为2的元素是否在集合set1中，不存在返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; sismember set1 4     //判断值为4的元素 是否在<span class="built_in">set</span>中，存在返回1，存在返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sinter set1 set2     //返回所有给定key的交集</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd set1 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sinter set1 set2     //返回所有给定key的交集</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set3</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br><span class="line">redis 127.0.0.1:6379&gt; sinterstore set3 set1 set2  //返回所有给定key（set1、set2）的交集,并将结果添加到set3中，覆盖添加</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set3</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sunion set1          //返回所有给定key的并集</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sunion set1 set2     //返回所有给定key的并集</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sunionstore set3 set1 set2   //返回所有给定key的并集,并将结果添加到set3中，覆盖添加</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set3</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sdiff set1 set2      //返回所有给定key的差集</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; sdiffstore set3 set1 set2    //返回所有给定key的差集,并将结果添加到set3中，覆盖添加</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers set3</span><br><span class="line">1) <span class="string">"4"</span></span><br></pre></td></tr></table></figure><p></p><h3 id="Sorted-Set类型"><a href="#Sorted-Set类型" class="headerlink" title="Sorted Set类型"></a>Sorted Set类型</h3><p>Sorted Set类型与Set类型相似，都是String类型元素的集合，不同的是Sorted Set属于有序集合，而Sorted Set通过一个double类型的整数score进行排序。<br>Set能做的事Sorte Set也可以做。而Sorted Set还可以完成一些Set不能做的事情，如使用Sorted Set构建一个具有优先级的队列，这也是List类型不能实现的。</p><h4 id="Sorted-Set类型支持的命令"><a href="#Sorted-Set类型支持的命令" class="headerlink" title="Sorted Set类型支持的命令"></a>Sorted Set类型支持的命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member</span><br></pre></td></tr></table></figure><p>添加元素member到集合，元素在集合中存在则更新对应score</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrem key member</span><br></pre></td></tr></table></figure><p>删除指定元素，1表示成功，如果元素不存在则返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zincrby key incr member</span><br></pre></td></tr></table></figure><p>增加对应member的score值，并且重新排序，返回更新后的score</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrank key member</span><br></pre></td></tr></table></figure><p>返回指定元素在集合中的排名（下标），集合中元素按score从小到大排序的</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrevrank key member</span><br></pre></td></tr></table></figure><p>同上，但是集合中元素按score从大到小排序</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrange key start end</span><br></pre></td></tr></table></figure><p>从集合中指定区间的元素，返回结果按score顺序排列</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrevrange key start end</span><br></pre></td></tr></table></figure><p>同上，返回结果按score逆序排列</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrangebyscore key min max</span><br></pre></td></tr></table></figure><p>返回集合中score在给定区间的元素</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcount key min max</span><br></pre></td></tr></table></figure><p>返回集合中score在给定区间的数量<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcard key</span><br></pre></td></tr></table></figure><p></p><p>返回集合中元素的个数<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zscore key element</span><br></pre></td></tr></table></figure><p></p><p>返回给定元素对应的score<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zremrangebyrank key min max</span><br></pre></td></tr></table></figure><p></p><p>删除集合中排名在给定区间的元素<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zremrangebyscore key min max</span><br></pre></td></tr></table></figure><p></p><p>删除集合中score在给定区间的元素</p><p>Sorted Set类型在Web应用中非常有用。如排行榜应用中按”顶贴“次数排序，方法是：将排序的值设置成Sorted Set的score值，将具体数据设置成相应的value，用户每次按”顶贴“按钮时，只需执行zadd命令修改score值。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 11    //添加元素11到集合ss1，按score指定下标</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 22</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 11    //添加元素11到集合ss1，因为11已存在所以只是更新11的score值</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrem ss1 11       //删除ss1中值为11的元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1   //返回ss1 从头到尾所有的元素，按照score排列</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrange ss1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 11</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrange ss1 0 -1  //返回ss1 从头到尾所有的元素，按照score逆序排列</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"11"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrank ss1 11        //返回值为11的元素在Sorted Set中的下标，集合中元素按score从小到大排序的</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; zrank ss1 2         //返回值为2的元素在Sorted Set中的下标，不存在返回(nil)</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; zrank ss1 22        //返回值为22的元素在Sorted Set中的下标</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zincrby ss1 1 11    //增加值为11的元素的score值，并且重新排序，返回更新后的score，此时值为11的元素的score为2</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zincrby ss1 2 11</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1     //返回ss1 从头到尾所有的元素，按照score排列</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"11"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrange ss1 0 -1  //返回ss1从头到尾所有的元素，按照score逆序排列</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrank ss1 11     //返回值为11的元素在Sorted Set中的下标，集合中元素按score从大到小排序的</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrank ss1 22</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"11"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrange ss1 0 -1</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrank ss1 11</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrevrank ss1 11</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; zrangebyscore ss1 0 0   //返回集合中score在给定区间的元素,即列出ss1中score值在0 ~ 0之间的元素</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br><span class="line">redis 127.0.0.1:6379&gt; zrangebyscore ss1 0 1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrangebyscore ss1 1 1</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrangebyscore ss1 1 4  //返回集合中score在给定区间的元素,即列出ss1中score值在 1 ~ 4 之间的元素</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">2) <span class="string">"11"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrangebyscore ss1 1 3</span><br><span class="line">1) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zcount ss1 0 0         //返回集合中score在给定区间的数量，即列出ss1中元素score值0 ~ 0之间的元素的数量</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; zcount ss1 0 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zcount ss1 0 2</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zcount ss1 0 4</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zcard ss1              //返回集合ss1中元素的个数</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zscore ss1 11          //返回给定元素11对应的score</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zscore ss1 2           //返回给定元素2对应的score，不存在则返回(nil)</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; zscore ss1 22</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zremrangebyrank ss1 0 1  //删除集合中排名在给定区间的元素,即删除ss1中下标为0~1之间的元素，返回删除的个数</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 11</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 2 33</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 4 22</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 3 44</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"33"</span></span><br><span class="line">3) <span class="string">"44"</span></span><br><span class="line">4) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zremrangebyrank ss1 0 1   //删除集合中排名在给定区间的元素,即删除ss1中下标为0~1之间的元素，返回删除的个数</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"44"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 2 55</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 1 66</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"66"</span></span><br><span class="line">2) <span class="string">"55"</span></span><br><span class="line">3) <span class="string">"44"</span></span><br><span class="line">4) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zremrangebyrank ss1 1 2</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"66"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zscore ss1 66</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zscore ss1 22</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"66"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 2 77</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd ss1 3 88</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"66"</span></span><br><span class="line">2) <span class="string">"77"</span></span><br><span class="line">3) <span class="string">"88"</span></span><br><span class="line">4) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zremrangebyscore ss1 0 1  //删除ss1中元素score值在0~1之间的元素的数量，返回删除元素的个数</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"77"</span></span><br><span class="line">2) <span class="string">"88"</span></span><br><span class="line">3) <span class="string">"22"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; zremrangebyscore ss1 1 3  //删除集合中score在给定区间的元素,即删除ss1中元素score值在1~3之间的元素的数量</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; zrange ss1 0 -1</span><br><span class="line">1) <span class="string">"22"</span></span><br></pre></td></tr></table></figure><h3 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h3><p>Hash类型适合应用于存储对象，例如用户信息对象。把用户ID做为key，可把用户保存到Hash类型中。</p><h4 id="Hash类型支持的命令"><a href="#Hash类型支持的命令" class="headerlink" title="Hash类型支持的命令"></a>Hash类型支持的命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hset key field value</span><br></pre></td></tr></table></figure><p>设置key对应的Hash对象中指定域的值。如果key对应的Hash对象不存在，将创建此Hash对象。<br>如果指定的域已经存在，其值将被重置<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hget key field</span><br></pre></td></tr></table></figure><p></p><p>返回与field域关联的值，如果该域不存在或者key对应的Hash对象不存在，返回值nil<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hmget key field1...fieldN</span><br></pre></td></tr></table></figure><p></p><p>返回存储在key对应的Hash对象中各个指定域相关关联的值。对于在Hash对象中不存在的域，返回值为nil<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hmset key field1 value1 ... fieldN valueN</span><br></pre></td></tr></table></figure><p></p><p>设置存储在key对应的Hash对象中指定域的值。该命令会复写Hash已经存在的域。如果key对应的Hash对象<br>不存在，将创建此对象<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hincrby key field <span class="built_in">integer</span></span><br></pre></td></tr></table></figure><p></p><p>将存储在key对应的Hash对象中field域相关联的值加上由integer指定的值。如果key对应的Hash对象不存在，<br>则创建此Hash对象。如果field域不存在或者具有一个不能表示为整型的字符串值，在执行该操作前设置为0<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexists key field</span><br></pre></td></tr></table></figure><p></p><p>查看指定field域是否已经存在<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdel key field</span><br></pre></td></tr></table></figure><p></p><p>删除指定的field域，返回1。如果指定的域或者key不存在，返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hlen key</span><br></pre></td></tr></table></figure><p>返回key对应的Hash对象中field数，如果key不存在，返回0</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hkeys key</span><br></pre></td></tr></table></figure><p>返回key对应的Hash对象中所有field名称</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hvals key</span><br></pre></td></tr></table></figure><p>返回key对应的Hash对象中所有值</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hgetall key</span><br></pre></td></tr></table></figure><p>返回key对应的Hash对象中所有域和相关联的值。在返回值中，每个域名称后面跟着相关联的值<br>例：<br></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; hset h1 name tang   //设置h1的“name”域的值为“tang”，返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; hset h1 age 24      //设置h1的“age”域的值为“24”，返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; hset h1 sex male    //设置h1的“sex”域的值为“male”，返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; hget h1 name        //返回h1的“name”域的值</span><br><span class="line"><span class="string">"tang"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hget h1 age</span><br><span class="line"><span class="string">"24"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hset h1 name tie    //设置h1的“name”域的值为“tie”，因为h1的“name”域已经存在，所以其值被重新复制，并返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; hget h1 name</span><br><span class="line"><span class="string">"tie"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hmget h1 name age sex  //返回h1的“name”、“age”、“sex”域的值</span><br><span class="line">1) <span class="string">"tie"</span></span><br><span class="line">2) <span class="string">"24"</span></span><br><span class="line">3) <span class="string">"male"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hmset h2 name tang age 24 sex male  //设置h2的“name”、“age”、“sex”域的值，分别为“tang”、“24”、“male”</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; hmget h2 name age sex</span><br><span class="line">1) <span class="string">"tang"</span></span><br><span class="line">2) <span class="string">"24"</span></span><br><span class="line">3) <span class="string">"male"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hincrby h1 age 2       //将存储在h1对应的Hash对象中“age”域相关联的值加上2，返回新的“age”域的值</span><br><span class="line">(<span class="built_in">integer</span>) 26</span><br><span class="line">redis 127.0.0.1:6379&gt; hincrby h1 name 2</span><br><span class="line">(error) ERR <span class="built_in">hash</span> value is not an <span class="built_in">integer</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hget h1 age</span><br><span class="line"><span class="string">"26"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hexists h1 age      //查看存储在h1对应的Hash对象中指定的<span class="string">"age"</span>域是否已经存在</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; hexists h3 age      //查看存储在h3对应的Hash对象中指定的<span class="string">"age"</span>域是否已经存在，h3不存在，返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; hexists h1 age1     //查看存储在h1对应的Hash对象中指定的<span class="string">"age1"</span>域是否已经存在，age1不存在，返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; hdel h1 age         //删除h1中指定的<span class="string">"age"</span>域，返回1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; hdel h1 age         //删除h1中指定的<span class="string">"age"</span>域，age域不存在，返回0</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; hget h1 age</span><br><span class="line">(nil)</span><br><span class="line">redis 127.0.0.1:6379&gt; hlen h1             //返回h1对应的Hash对象中field数</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; hkeys h1            //返回h1对应的Hash对象中所有field名称</span><br><span class="line">1) <span class="string">"name"</span></span><br><span class="line">2) <span class="string">"sex"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hvals h1            //返回h1对应的Hash对象中所有值</span><br><span class="line">2) <span class="string">"male"</span></span><br><span class="line">redis 127.0.0.1:6379&gt; hgetall h1          //返回h1对应的Hash对象中所有域和相关联的值.一个域、一个值的返回，即“name”为域，“tie”为值</span><br><span class="line">1) <span class="string">"name"</span></span><br><span class="line">2) <span class="string">"tie"</span></span><br><span class="line">3) <span class="string">"sex"</span></span><br><span class="line">4) <span class="string">"male"</span></span><br></pre></td></tr></table></figure><p></p></div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"> <img id="wechat_subscriber_qcode" src="/images/wechat_subscribe_qrcode.jpg" alt="Mervyn wechat" style="width:200px;max-width:100%"><div>欢迎关注我的个人公众号</div></div><div><div id="reward-container"><div></div> <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wepay.jpeg" alt="Mervyn 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpeg" alt="Mervyn 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Mervyn</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.mervyntang.com/93.html" title="Redis 常用操作">https://www.mervyntang.com/93.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-CN" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/Redis/" rel="tag"># Redis</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/8.html" rel="next" title="Mysql数据库备份和还原常用的命令"><i class="fa fa-chevron-left"></i> Mysql数据库备份和还原常用的命令</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/91.html" rel="prev" title="判断 Composer 中加载的依赖包对应的版本号">判断 Composer 中加载的依赖包对应的版本号<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="Mervyn"><p class="site-author-name" itemprop="name">Mervyn</p><div class="site-description motion-element" itemprop="description">Coding Change Our Life</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">61</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">37</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Mervyn1205" title="GitHub &rarr; https://github.com/Mervyn1205" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:ttz5127@163.com" title="E-Mail &rarr; mailto:ttz5127@163.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://www.mervyntang.com" title="https://www.mervyntang.com">Mervyn</a></li><li class="links-of-blogroll-item"> <a href="https://mervyn1205.github.io/linux-command" title="https://mervyn1205.github.io/linux-command" rel="external nofollow noopener noreferrer" target="_blank">Linux 命令查找</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Key的相关命令"><span class="nav-number">1.</span> <span class="nav-text">Key的相关命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis数据类型"><span class="nav-number">2.</span> <span class="nav-text">Redis数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">2.1.</span> <span class="nav-text">String</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#String类型支持的命令"><span class="nav-number">2.1.1.</span> <span class="nav-text">String类型支持的命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List类型"><span class="nav-number">2.2.</span> <span class="nav-text">List类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#List类型支持的命令"><span class="nav-number">2.2.1.</span> <span class="nav-text">List类型支持的命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set类型"><span class="nav-number">2.3.</span> <span class="nav-text">Set类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sorted-Set类型"><span class="nav-number">2.4.</span> <span class="nav-text">Sorted Set类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sorted-Set类型支持的命令"><span class="nav-number">2.4.1.</span> <span class="nav-text">Sorted Set类型支持的命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hash类型"><span class="nav-number">2.5.</span> <span class="nav-text">Hash类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Hash类型支持的命令"><span class="nav-number">2.5.1.</span> <span class="nav-text">Hash类型支持的命令</span></a></li></ol></li></ol></li></ol></div></div></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> <a href="http://www.beian.miit.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">粤ICP备17078907号</a> &copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Mervyn</span></div><div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> 强力驱动 v3.8.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Gemini</a> v7.2.0</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/affix.js?v=7.2.0"></script><script src="/js/schemes/pisces.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script><script>var gitalk=new Gitalk({clientID:"3e61105cf8077806c053",clientSecret:"2f26a9a24d9ea0c1f5a94dceb7d59be07de6fc45",repo:"mervyn1205.github.io",owner:"Mervyn1205",admin:["Mervyn1205"],id:md5(location.pathname),language:window.navigator.language||window.navigator.userLanguage,distractionFreeMode:"true"});gitalk.render("gitalk-container")</script><script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      const selection = document.getSelection();
      const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
      if (selected) {
        selection.removeAllRanges();
        selection.addRange(selected);
      }
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script></body></html>